<UserControl x:Class="MMC_Software.VentanaCategoriasProductos"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Height="500" Width="920"
        MinWidth="900" MinHeight="480"
        Background="#34495E">
    <UserControl.Resources>
        <!-- Estilo base para todos los botones CRUD -->
        <Style x:Key="CrudButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="38"/>
            <Setter Property="Height" Value="38"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="20">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Opacity" Value="0.85"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Opacity" Value="0.7"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Colores corporativos -->
        <SolidColorBrush x:Key="ColorCrear" Color="#4A90E2"/>
        <SolidColorBrush x:Key="ColorEditar" Color="#6C63FF"/>
        <SolidColorBrush x:Key="ColorGuardar" Color="#2ECC71"/>
        <SolidColorBrush x:Key="ColorEliminar" Color="#E74C3C"/>
        <SolidColorBrush x:Key="ColorNeutro" Color="#34495E"/>
    </UserControl.Resources>

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- FORMULARIO Y LISTADO -->
        <Grid Grid.Row="0" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="1.3*"/>
            </Grid.ColumnDefinitions>

            <!-- FORMULARIO IZQUIERDA -->
            <Border Grid.Column="0" Padding="20" Background="White" CornerRadius="12" BorderBrush="#DADADA" BorderThickness="1" Margin="0,0,10,0">
                <StackPanel Orientation="Vertical" VerticalAlignment="Top">
                    <TextBlock Text="Registro de Categoría de Inventario"
                               FontSize="20"
                               FontWeight="Bold"
                               Foreground="#34495E"
                               Margin="0,0,0,15"/>

                    <!-- CÓDIGO -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="Código:" Width="140" VerticalAlignment="Center" FontWeight="SemiBold"/>
                        <TextBox x:Name="txtCodigoCategoria" Width="80" MaxLength="3" Padding="5" IsEnabled="False"/>
                    </StackPanel>

                    <!-- NOMBRE -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="Nombre:" Width="140" VerticalAlignment="Center" FontWeight="SemiBold"/>
                        <TextBox x:Name="txtNombreCategoria" Width="300" MaxLength="50" Padding="5" 
                                 TextChanged="txtNombreCategoria_TextChanged" IsEnabled="False"/>
                    </StackPanel>

                    <!-- TIPO GRAVADO -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="Tipo Gravado:" Width="140" VerticalAlignment="Center" FontWeight="SemiBold"/>
                        <ComboBox x:Name="cmbTipoGravado" Width="220" Padding="4" IsEnabled="False"/>
                    </StackPanel>

                    <!-- TARIFA IMPUESTO -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="Tarifa IVA (%):" Width="140" VerticalAlignment="Center" FontWeight="SemiBold"/>
                        <StackPanel Orientation="Horizontal">
                            <TextBox x:Name="txtTarifaImpuesto" Width="60" Padding="5"
                                     PreviewTextInput="txtTarifaImpuesto_PreviewTextInput"
                                     IsEnabled="False"/>
                            <TextBlock Text="%" VerticalAlignment="Center" Margin="5,0,0,0" FontWeight="Bold"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- LISTADO DERECHA -->
            <Border Grid.Column="1" Padding="15" Background="White" CornerRadius="12" BorderBrush="#DADADA" BorderThickness="1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="Categorías Registradas"
                               Grid.Row="0"
                               FontSize="18"
                               FontWeight="Bold"
                               Foreground="#34495E"
                               Margin="0,0,0,12"/>

                    <ListBox x:Name="lstCategorias"
                             Grid.Row="1"
                             BorderBrush="#DDD"
                             BorderThickness="1"
                             Background="#FAFAFA"
                             VerticalAlignment="Stretch"
                             SelectionChanged="lstCategorias_SelectionChanged"
                             ScrollViewer.VerticalScrollBarVisibility="Auto"/>

                    <Button x:Name="btnConfiguracionContable"
                            Grid.Row="2"
                            Content="⚙ Configuración Contable"
                            Background="{StaticResource ColorNeutro}"
                            Foreground="White"
                            FontWeight="SemiBold"
                            Padding="8,4"
                            Width="220"
                            Height="34"
                            Margin="0,12,0,0"
                            HorizontalAlignment="Right"
                            Cursor="Hand"
                            Click="btnConfiguracionContable_Click"/>
                    
                </Grid>
            </Border>
        </Grid>

        <!-- BOTONES CRUD -->
        <Border Grid.Row="1" Padding="10" Background="Transparent">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="btnCrear" Content="➕" Background="{StaticResource ColorCrear}" Style="{StaticResource CrudButtonStyle}" ToolTip="Nuevo" Click="btnCrear_Click"/>
                <Button x:Name="btnEditar" Content="✏️" Background="{StaticResource ColorEditar}" Style="{StaticResource CrudButtonStyle}" ToolTip="Editar" Click="btnEditar_Click"/>
                <Button x:Name="btnEliminar" Content="🗑️" Background="{StaticResource ColorEliminar}" Style="{StaticResource CrudButtonStyle}" ToolTip="Eliminar" Click="btnEliminar_Click"/>
                <Button x:Name="btnGuardar" Content="💾" Background="{StaticResource ColorGuardar}" Style="{StaticResource CrudButtonStyle}" ToolTip="Guardar" Click="btnGuardar_Click"/>
                <Button x:Name="btnSalir" Content="Salir" Background="{StaticResource ColorEliminar}" Style="{StaticResource CrudButtonStyle}" ToolTip="Guardar"
                        Click="btnSalir_Click"/>
            </StackPanel>
        </Border>
    </Grid>

</UserControl>
